<wdkModel>
    <recordClassSet name="OrfRecordClasses">

        <recordClass name="OrfRecordClass" type="ORF">

            <!-- primary key definition -->
            <primaryKeyAttribute name="primary_key"
                                 displayName="Gene">
                <columnRef>source_id</columnRef>
                <columnRef>project_id</columnRef>
                <text>
                    <![CDATA[
                    $$project_id$$:$$source_id$$
                    ]]>
                </text>                
            </primaryKeyAttribute>


          <!-- =============================================================== -->
          <!--   Reporters -->  
          <!-- =============================================================== -->

          <reporter name="tabular" displayName="Summary - TAB Delimited"
                      implementation="org.gusdb.wdk.model.report.TabularReporter" />
        
          <reporter name="fullRecord" displayName="Detailed" excludeProjects="ApiDB" 
                      implementation="org.gusdb.wdk.model.report.FullRecordReporter" />

           <reporter name="srt" displayName="Sequence - configurable FASTA"
                    implementation=""/>

           <!-- =================================================================== -->
           <!--  Attributes  ++++++++-->
           <!-- =================================================================== -->

              <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
              <!-- BFMV attributes -->  
              <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

            <attributeQueryRef ref="OrfAttributes.Bfmv">
                <columnAttribute name="nas_id" displayName="Sequence ID" internal="false"/>
                <columnAttribute name="orf_start" internal="true"/>
                <columnAttribute name="orf_end" internal="true"/>
                <columnAttribute name="orf_start_text" displayName="Start" internal="false" align="center"/>
                <columnAttribute name="orf_end_text" displayName="End" internal="false" align="center"/>
                <columnAttribute name="orf_strand" displayName="Strand" internal="false" align="center"/>
                <columnAttribute name="length" displayName="Length" internal="false" align="center"/>
                <columnAttribute name="organism" displayName="Organism" internal="true" inReportMaker="true"/>
                <columnAttribute name="formatted_organism" displayName="Organism" internal="false" inReportMaker="false"/>
            </attributeQueryRef>

              <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
              <!-- sequence attributes -->  
              <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

            <attributeQueryRef ref="OrfAttributes.Sequence">
                <columnAttribute name="sequence" displayName="Sequence" internal="true" />
            </attributeQueryRef>

          <!-- =================================================================== -->
          <!--  Text Attributes  ++++++++-->
          <!-- =================================================================== -->

            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <!-- overview -->  
            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <textAttribute name="orf_location_text" displayName="Location"
                           internal="false" inReportMaker="true">
                <text>
                    <![CDATA[
                       $$nas_id$$: $$orf_start_text$$ - $$orf_end_text$$ ($$orf_strand$$)
                    ]]>
               </text>
           </textAttribute>           

            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <!-- overview -->  
            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <textAttribute name="overview" displayName="Overview"
                           internal="true" inReportMaker="false">
               <text>
                    <![CDATA[
                    Open Reading Frame $$primaryKey$$ from $$nas_id$$.<br>
                    Organism: <i>$$organism$$</i>
                    ]]>
               </text>
           </textAttribute>

        <!-- =================================================================== -->
        <!-- orf Tables++++++++-->
        <!-- =================================================================== -->

        <table name="Locations" includeProjects="GiardiaDB"
                 displayName="Orf Location"
                 queryRef="OrfTables.Locations">
            <columnAttribute displayName= "Sequence Level" name="is_top_level" internal="false"/>
            <columnAttribute displayName= "Genomic Sequence" name="sequence_source_id" internal="false"/>
            <textAttribute inReportMaker="true" name="location" displayName="Location">
                  <text>
                    <![CDATA[
                      $$start_min$$ - $$end_max$$ ($$is_reversed$$)
                    ]]>
                  </text>
            </textAttribute>
 
            <linkAttribute displayName="Genome Browser" name="view_link" inReportMaker="false" internal="false" >
                 <displayText>
                    <![CDATA[ View ]]>
                 </displayText>
                   <url includeProjects="GiardiaDB">
                    <![CDATA[
                      /@CGI_OR_MOD@/gbrowse/giardiadb/?name=$$sequence_source_id$$%3A$$start_context$$-$$end_context$$;width=550;label=ORF;label=Gene;label=DeprecatedGene;h_feat=$$feature_source_id$$
                        ]]>
                   </url>
            </linkAttribute>
            <columnAttribute displayName= "start" name="start_min" internal="true"/>
            <columnAttribute displayName= "end" name="end_max" internal="true"/>
            <columnAttribute displayName= "is_reversed" name="is_reversed" internal="true"/>
            <columnAttribute displayName= "start_context" name="start_context" internal="true"/>
            <columnAttribute displayName= "end_context" name="end_context" internal="true"/>
            <columnAttribute displayName= "Feature ID" name="feature_source_id" internal="true"/>
          </table>

        </recordClass>

    </recordClassSet>
</wdkModel>

