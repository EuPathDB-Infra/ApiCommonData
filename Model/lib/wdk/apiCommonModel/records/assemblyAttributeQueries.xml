<wdkModel>

    <querySet name="AssemblyAttributes" queryType="attribute" includeProjects="CryptoDB,ToxoDB,GiardiaDB,ApiDB,PlasmoDB">

      <defaultTestParamValues includeProjects="PlasmoDB">
         <paramValue name="source_id">PfDT.379332.tmp</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="ToxoDB" minRows="0">
         <paramValue name="source_id">NcDT.426290.tmp</paramValue>
         <paramValue name="project_id">ToxoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="CryptoDB">
         <paramValue name="source_id">CpDT.34933.tmp</paramValue>
         <paramValue name="project_id">CryptoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="GiardiaDB">
         <paramValue name="source_id">GlDT.40190.tmp</paramValue>
         <paramValue name="project_id">GiardiaDB</paramValue>
      </defaultTestParamValues>

      <testRowCountSql>
          select 37447 from dual
      </testRowCountSql>

        <sqlQuery name="Bfmv">
        <column name="project_id" sortingTable="apidb.AssemblyAttributes"/>
        <column name="source_id" sortingTable="apidb.AssemblyAttributes"/>
        <column name="organism" sortingTable="apidb.AssemblyAttributes"  lowerCase="true"/>
        <column name="formatted_organism" sortingTable="apidb.AssemblyAttributes" sortingColumn="organism" lowerCase="true"/>
        <column name="est_count"  sortingTable="apidb.AssemblyAttributes"/>
        <column name="length" sortingTable="apidb.AssemblyAttributes"/>
        <column name="a_count" sortingTable="apidb.AssemblyAttributes"/>
        <column name="t_count" sortingTable="apidb.AssemblyAttributes"/>
        <column name="c_count" sortingTable="apidb.AssemblyAttributes"/>
        <column name="g_count" sortingTable="apidb.AssemblyAttributes"/>
        <column name="other_count" sortingTable="apidb.AssemblyAttributes"/>
<!--     <sql includeProjects="ToxoDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(SUBSTR(aa.organism, 1,   40),'Toxoplasma','T.') AS organism,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  apidb.AssemblyAttributes aa
     ]]>
    </sql>
-->
     <sql includeProjects="ToxoDB,CryptoDB,GiardiaDB,TrichDB,ApiDB,PlasmoDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(
        REPLACE(
         REPLACE(
          REPLACE(
            REPLACE(aa.organism,'Cryptosporidium','C.' ),
                                'Giardia',        'G.' ),
                                'Toxoplasma',        'T.' ),
                                'Plasmodium',        'P.' ),
                                'Trichomonas',    'T.' ) AS organism,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  apidb.AssemblyAttributes aa
     ]]>
    </sql>
    </sqlQuery>


       <sqlQuery name="Sequence">
        <column name="project_id"/>
        <column name="source_id"/>
        <column name="sequence"/>
     <sql includeProjects="ToxoDB,CryptoDB,GiardiaDB,TrichDB,PlasmoDB">
      <![CDATA[ 
        select a.source_id, '@PROJECT_ID@' as project_id, 
               a.sequence 
        from dots.assembly a 
     ]]>
    </sql>
 <sql includeProjects="ApiDB">
                <![CDATA[
                SELECT ens.source_id, ens.sequence,
                       '@project_id@' as project_id
                FROM dots.ExternalNaSequence ens, sres.SequenceOntology so
                WHERE so.term_name = 'assembly'
                  AND so.sequence_ontology_id = ens.sequence_ontology_id
                ]]>
           </sql>
    </sqlQuery>


    </querySet>

</wdkModel>
