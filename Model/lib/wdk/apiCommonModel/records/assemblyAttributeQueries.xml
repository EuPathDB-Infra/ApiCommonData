<wdkModel>

    <querySet name="AssemblyAttributes" includeProjects="CryptoDB,ToxoDB,GiardiaDB,ApiDB">
        <sqlQuery name="Bfmv" isCacheable="false">
        <paramRef ref="recordParams.primaryKey"/>
        <paramRef ref="recordParams.projectId"/>
        <column name="project_id" sortingTable="apidb.AssemblyAttributes"/>
        <column name="source_id" sortingTable="apidb.AssemblyAttributes"/>
        <column name="organism" sortingTable="apidb.AssemblyAttributes" sortingColumn="organism"/>
        <column name="est_count"  sortingTable="apidb.AssemblyAttributes"/>
        <column name="length" sortingTable="apidb.AssemblyAttributes"/>
     <sql includeProjects="ToxoDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(SUBSTR(aa.organism, 1,   40),'Toxoplasma','T.') AS organism,
      aa.est_count, aa.length
      FROM  apidb.AssemblyAttributes aa
      WHERE aa.source_id = $$primaryKey$$
     ]]>
    </sql>
     <sql includeProjects="CryptoDB,GiardiaDB,TrichDB,ApiDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(
        REPLACE(
          REPLACE(aa.organism,'Cryptosporidium','C.' ),
                          'Giardia',        'G.' ),
                          'Trichomonas',    'T.' ) AS organism,
      aa.est_count, aa.length
      FROM  apidb.AssemblyAttributes aa
      WHERE aa.source_id = $$primaryKey$$
     ]]>
    </sql>
    </sqlQuery>
    </querySet>

</wdkModel>
