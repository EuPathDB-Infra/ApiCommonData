<wdkModel>

  <!-- notes

    - why don't crypto and api have EstBySourceId query? apidb HAS it but not in the OLD model used for this. There is no reason why crypto could not have it.

    - why doesn't est by source id take a dataset? no reason

    - why does only byLocation have sorting attribute set? no reason

    - do we need organism properties for these (ie, which organisms we have ESTs for?) Cp,Pb,Pc,Pf,Pv,Py,Tg

    - why does crypto/api not have the dyn attrs for the gene overlap query? probably no reason, just it was not done.

  -->


  <questionSet name="EstQuestions" displayName="Search ESTs">

  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- By Id -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

  <question name="EstBySourceId"
	      displayName="ID"
	      queryRef="EstIds.EstBySourceId"
	      recordClassRef="EstRecordClasses.EstRecordClass"
              noSummaryOnSingleRecord="true" excludeProjects="ApiDB">

        <attributesList
           summary="organism,dbest_name"
        />
        <summary>
	Find ESTs by ID
	</summary>

	<description>
	  <![CDATA[
	    Find ESTs by ID
	  ]]>
	</description>

       <propertyList name="genomeAttribution">
          <value/>
       </propertyList>
       <propertyList name="specificAttribution">
           <value includeProjects="GiardiaDB,PlasmoDB,TrichDB,ToxoDB">dbEST</value>
           <value includeProjects="CryptoDB">CparvumESTs</value>
           <value includeProjects="PlasmoDB">ZhangGardnerPf3D7_EstLibrary</value>
           <value includeProjects="PlasmoDB">Florent_ESTLibrary</value>
           <value includeProjects="PlasmoDB">WatanabePf3D7_EstLibrary</value>
           <value includeProjects="PlasmoDB">WatanabePv_EstLibrary</value>
           <value includeProjects="PlasmoDB">WatanabePy17XL_EstLibrary</value>
       </propertyList>

  </question>

  <question name="EstBySourceId"
	      displayName="ID"
	      queryRef="EstIds.EstBySourceId"
	      recordClassRef="EstRecordClasses.EstRecordClass"
              noSummaryOnSingleRecord="false" includeProjects="ApiDB">

        <attributesList
           summary="organism,dbest_name"
        />
        <summary>
	Find ESTs by ID
	</summary>

	<description>
	  <![CDATA[
	    Find ESTs by ID
	  ]]>
	</description>

       <propertyList name="genomeAttribution">
          <value/>
       </propertyList>
       <propertyList name="specificAttribution">
           <value>dbEST</value>
           <value>CparvumESTs</value>
           <value>ZhangGardnerPf3D7_EstLibrary</value>
           <value>Florent_ESTLibrary</value>
           <value>WatanabePf3D7_EstLibrary</value>
           <value>WatanabePv_EstLibrary</value>
           <value>WatanabePy17XL_EstLibrary</value>
       </propertyList>

  </question>


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- BLAST Similarity -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

  <question name="EstsBySimilarity"
         displayName="BLAST"
         category="Similarity/Pattern"
         queryRef="EstIds.EstsBySimilarity"
         recordClassRef="EstRecordClasses.EstRecordClass"
         fullAnswer="true">

        <attributesList
           summary="Header,TabularRow,Alignment,Footer"
        /> 

        <summary>
           Find ESTs that have BLAST similarity to your input sequence.
        </summary>

        <description>
           <![CDATA[
             Find ESTs that have BLAST similarity to your input query sequence.
            <p>The search uses <a href="http://blast.wustl.edu/" target="_blank">WU BLAST</a>.
          ]]>
        </description>

        <dynamicAttributes>
             <columnAttribute name="TabularRow" displayName="Blast summary"
                              inReportMaker="false"/>
             <columnAttribute name="Alignment" displayName="Blast alignment"
                              inReportMaker="false"/>
             <columnAttribute name="Header" displayName="Blast header"
                              inReportMaker="false"/>
             <columnAttribute name="Footer" displayName="Blast footer"
                              inReportMaker="false"/>
        </dynamicAttributes>
       <propertyList name="genomeAttribution">
          <value/>
       </propertyList>
       <propertyList name="specificAttribution">
           <value includeProjects="ApiDB,GiardiaDB,PlasmoDB,TrichDB,ToxoDB">dbEST</value>
           <value includeProjects="ApiDB,CryptoDB">CparvumESTs</value>
           <value includeProjects="ApiDB,PlasmoDB">ZhangGardnerPf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">Florent_ESTLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePv_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePy17XL_EstLibrary</value>
       </propertyList>
        <propertyList name="attribution">
           <value>dbEST</value>
        </propertyList>
  </question>


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- Location -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

  <question name="EstsByLocation"
              category="Genomic Position"
              displayName="Chromosomal Location"
              queryRef="EstIds.EstsByLocation"
              recordClassRef="EstRecordClasses.EstRecordClass">

        <attributesList excludeProjects="ApiDB,CryptoDB"
              summary="formatted_organism,dbest_name,est_location"
              sorting="est_location asc"
        /> 

        <attributesList includeProjects="CryptoDB,ApiDB"
              summary="formatted_organism,dbest_name"
              sorting="formatted_organism asc"
        /> 

        <dynamicAttributes excludeProjects="CryptoDB,ApiDB">
          <columnAttribute name="est_location" displayName="EST location(s)"/>
        </dynamicAttributes>

        <summary>
            Find ESTs that are located in a specified genomic region.
        </summary>

<description includeProjects="CryptoDB">
           <![CDATA[
          Find ESTs within a given genomic region.<br>
          Select a <i>C. parvum</i> chromosome from the pull-down menu or
          enter the name of a contig for either <i>C. parvum</i> or <i>C. hominis</i>(e.g."AAEL01000057").
          If you enter both, your result will include the union.
          The Start and End locations correspond to the coordinates of the EST(s) on the chromosome.
          ]]>
        </description>
        <description includeProjects="PlasmoDB">
          <![CDATA[
          Find ESTs that are located in a specified genomic region.<br><br>
          Either select a <i>P. falciparum</i> genomic sequence from the
          pull-down menu <i>or</i> enter a genomic sequence ID from any
          <i>Plasmodium</i> species (if you supply both,  your result will include the union).
          The Start and End locations correspond to the coordinates of the EST(s) on the chromosome.
          ]]>
        </description>
        <description includeProjects="ApiDB">
          <![CDATA[
          Find ESTs within a given genomic region.<br>
          Either select an organism and a genomic sequence from the
          pull-down menu or enter a genomic sequence ID from any Crypto,
          Plasmo or Toxo species (e.g. "AAEL01000057", "MAL4", "Ia").
          If you enter both, your result will include the union.
          The Start and End locations correspond to the coordinates of
          the EST(s) on the chromosome.
          ]]>
        </description>
        <description includeProjects="TrichDB">
          <![CDATA[
          Find ESTs within a given genomic region.<br>
          Enter a genomic sequence ID for any <i>T. vaginalis</I> contig.
          The Start and End locations correspond to the coordinates of
          the EST(s) on the chromosome.
          ]]>
        </description>
        <description includeProjects="GiardiaDB">
          <![CDATA[
          Find ESTs within a given genomic region.<br>
          Enter a genomic sequence ID for any <i>G. lamblia</I> contig.
          The Start and End locations correspond to the coordinates of
          the EST(s) on the sequence.
          ]]>
        </description>
        <description includeProjects="ToxoDB">
              <![CDATA[
          Find ESTs that are located in a specified genomic region.<br><br>
          Either select a <i>T. gondii</i> chromosome from the pull-down menu
          <b>or</b> enter a sequence ID of a chromosome (e.g. "VIIa") or a
          scaffold (e.g. "TGG_995305"). <br>
          If you enter both, your result will include the union.
          The Start and End locations correspond to the coordinates of the EST(s) on the chromosome.
          ]]>
        </description>


       <propertyList name="specificAttribution">
           <value includeProjects="ApiDB,GiardiaDB,PlasmoDB,TrichDB,ToxoDB">dbEST</value>
           <value includeProjects="ApiDB,CryptoDB">CparvumESTs</value>
           <value includeProjects="ApiDB,PlasmoDB">ZhangGardnerPf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">Florent_ESTLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePv_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePy17XL_EstLibrary</value>
       </propertyList>
    </question>


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- By Library -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

  <question name="EstsByLibrary"
              category="Transcript Expression"
              displayName="Library"
              queryRef="EstIds.EstsByLibrary"
              recordClassRef="EstRecordClasses.EstRecordClass">

        <summary>Find ESTs by Library Name</summary>
        <description>Find ESTs by Library Name</description>

        <attributesList excludeProjects="CryptoDB,ToxoDB"
              summary="formatted_organism,dbest_name"
              sorting="formatted_organism asc"
        /> 
        <attributesList includeProjects="CryptoDB,ToxoDB"
              summary="formatted_organism,dbest_name,assembly_link,est_num"
              sorting="formatted_organism asc,dbest_name asc,assembly_link asc"
        /> 

       <propertyList name="genomeAttribution">
          <value/>
       </propertyList>
       <propertyList name="specificAttribution">
           <value includeProjects="ApiDB,GiardiaDB,PlasmoDB,TrichDB,ToxoDB">dbEST</value>
           <value includeProjects="ApiDB,CryptoDB">CparvumESTs</value>
           <value includeProjects="ApiDB,PlasmoDB">ZhangGardnerPf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">Florent_ESTLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePv_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePy17XL_EstLibrary</value>
       </propertyList>
  </question>


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- With Gene Overlap -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <question name="EstsWithGeneOverlap"
         displayName="Extent of Gene Overlap"
         queryRef="EstIds.EstsWithGeneOverlap"
         recordClassRef="EstRecordClasses.EstRecordClass">

        <attributesList excludeProjects="CryptoDB,ToxoDB,ApiDB"
           summary="formatted_organism,dbest_name,est_locations,genes"
           sorting="formatted_organism asc,est_locations asc"
        /> 
        <attributesList includeProjects="ToxoDB,CryptoDB"
           summary="formatted_organism,dbest_name,est_locations,genes,assembly_link,est_num"
           sorting="formatted_organism asc,est_locations asc,assembly_link asc"
        /> 
        <attributesList includeProjects="ApiDB"
           summary="formatted_organism,dbest_name,assembly_link"
           sorting="formatted_organism asc"
        /> 
<summary>Find ESTs in a Library that overlap or not with a gene.</summary>
        <description>Find ESTs that Overlap a Gene..</description>

        <dynamicAttributes excludeProjects="ApiDB">
            <columnAttribute name="est_locations" displayName="EST location(s)"/>
            <columnAttribute name="genes" displayName="Gene(s)"/>
        </dynamicAttributes>

       <propertyList name="specificAttribution">
           <value includeProjects="ApiDB,GiardiaDB,PlasmoDB,TrichDB,ToxoDB">dbEST</value>
           <value includeProjects="ApiDB,CryptoDB">CparvumESTs</value>
           <value includeProjects="ApiDB,PlasmoDB">ZhangGardnerPf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">Florent_ESTLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePf3D7_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePv_EstLibrary</value>
           <value includeProjects="ApiDB,PlasmoDB">WatanabePy17XL_EstLibrary</value>
       </propertyList>
    </question>

  </questionSet>

</wdkModel>
