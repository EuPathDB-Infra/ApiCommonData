<wdkModel>
    
  <!-- ==================================================================== -->
  <!-- Params  -->
  <!-- ==================================================================== -->
  <paramSet name="genomicParams">

    <!------------------------------------------------------------------>
    <!-- Organism -->  
    <!------------------------------------------------------------------>
      <flatVocabParam name="organism" excludeProjects="ApiDB"
                     queryRef="GenomicVocabQueries.Organism"
                     prompt="Organism"
                     multiPick="true">
      </flatVocabParam>

      <enumParam name="organism" includeProjects="ApiDB"
                     prompt="Organism"
                     multiPick="true"
        <enumList>
          <enumValue term="Cryptosporidium hominis" includeProjects="CryptoDB"
                 internal=   "Cryptosporidium hominis"/> 
          <enumValue term="Cryptosporidium parvum" includeProjects="CryptoDB"
                 internal=   "Cryptosporidium parvum"/> 
          <enumValue term="Cryptosporidium muris" includeProjects="CryptoDB"
                 internal=   "Cryptosporidium muris"/> 
          <enumValue term="Plasmodium berghei" includeProjects="PlasmoDB"
                 internal=   "Plasmodium berghei"/>
          <enumValue term="Plasmodium chabaudi" includeProjects="PlasmoDB"
                 internal=   "Plasmodium chabaudi"/>
          <enumValue term="Plasmodium falciparum" includeProjects="PlasmoDB"
                 internal=   "Plasmodium falciparum"/>
          <enumValue term="Plasmodium knowlesi" includeProjects="PlasmoDB"
                 internal=   "Plasmodium knowlesi"/>
          <enumValue term="Plasmodium vivax" includeProjects="PlasmoDB"
                 internal=   "Plasmodium vivax"/>
          <enumValue term="Plasmodium yoelii" includeProjects="PlasmoDB"
                 internal=   "Plasmodium yoelii"/>
          <enumValue term="Toxoplasma gondii"  includeProjects="ToxoDB"
                 internal=   "Toxoplasma gondii"/> 
        </enumList>
      </enumParam>

    <!------------------------------------------------------------------>
    <!-- Blast database type -->  
    <!------------------------------------------------------------------>
      <enumParam name="BlastDatabaseType"
                     prompt="Target"
                     multiPick="false">
        <help>
             The type of sequence you want to BLAST against
        </help>
        <enumList>
          <enumValue term="Genome"
                 internal=   "genomic"/>
          <enumValue term="Translated Genome"
                 internal=   "genomic Translated"/>
        </enumList>
      </enumParam>

  </paramSet>
    
  <!--===========================================================================-->
  <!-- Vocab queries  -->
  <!--===========================================================================-->

    <querySet name="GenomicVocabQueries">
        <sqlQuery name="Organism">
            <column name="internal"/>
            <column name="term"/>
             <sql>
                SELECT orgs.term, orgs.internal
                FROM (SELECT tn.name AS term, t.taxon_id AS internal
                      FROM sres.TaxonName tn, sres.taxon t
                      WHERE tn.name_class='scientific name'
                        AND t.taxon_id = tn.taxon_id
                        AND t.rank = 'species'
                        AND t.taxon_id in
                            (SELECT taxon_id
                             FROM sres.taxon
                             CONNECT BY taxon_id = prior parent_id
                             START WITH taxon_id IN
                             (SELECT ens.taxon_id
                              FROM dots.ExternalNaSequence ens))) orgs,
                     (SELECT 'Plasmodium falciparum' AS term, 1 as rank from dual
                      UNION
                      SELECT 'Plasmodium vivax' AS term, 2 as rank from dual
                      UNION
                      SELECT 'Plasmodium yoelii' AS term, 3 as rank from dual) partial_order
                  WHERE orgs.term = partial_order.term(+)
                  ORDER BY partial_order.rank
            </sql>
        </sqlQuery>

    </querySet>

</wdkModel>
