<wdkModel>
    
  <!-- ==================================================================== -->
  <!-- Params  -->
  <!-- ==================================================================== -->
    <paramSet name="genomicParams">

  <!------------------------------------------------------------------>
  <!-- Organism -->  
  <!------------------------------------------------------------------>
      <flatVocabParam name="organism"
                     queryRef="GenomicVocabQueries.Organism"
                     prompt="Organism"
                     multiPick="true">
        <help>
           <text>
             Select one or more organisms.
           </text>
        </help>
      </flatVocabParam>

  <!------------------------------------------------------------------>
  <!-- Blast database type -->  
  <!------------------------------------------------------------------>
      <enumParam name="BlastDatabaseType"
                     prompt="Target"
                     multiPick="false">
        <help>
             The type of sequence you want to BLAST against
        </help>
        <enumList>
          <enumValue term="Genome"
                 internal=   "genomic"/>
          <enumValue term="Translated Genome"
                 internal=   "genomic Translated"/>
        </enumList>
      </enumParam>


  <!------------------------------------------------------------------>
  <!-- Sequence Id -->  
  <!------------------------------------------------------------------>

   <stringParam name="sequenceid"
            prompt="Contig ID" 
            substitute="yes">
        <suggest includeProjects="CryptoDB"
            sample="(Examples: AAEL01000057, AAEE01000009, BX526834)"
            default="(Example: AAEE01000006)"/>
        <suggest includeProjects="ApiDB"
            sample="AAEL010000057, AAEE01000009, BX526834"
            default="AAEL01000057"/>
        <suggest includeProjects="ToxoDB"
            sample="Ia, VIIb, XI"
            default="Ia"/>
        <suggest includeProjects="PlasmoDB"
            sample="(Examples: MAL4, ctg_4094)"
            default="MAL4"/>     
        <help includeProjects="ApiDB">
          Enter an identifier for a genomic sequence. The IDs correspond to the accession numbers in the GenBank records supplied by the sequencing centers. Wild cards are permitted in this search, i.e. use AAEE* to ask for all &lt;i&gt; C.parvum &lt;/i&gt; contigs.
        <help includeProjects="CrptoDB">
            Enter an identifier for a genomic contig. The IDs
            correspond to the accession numbers in the GenBank records
            supplied by the sequencing centers. Contig ID's from
            &lt;i&gt; C. parvum &lt;/i&gt; whole genome sequencing
            project begin with 'AAEE' and contig ID's for &lt;i&gt;
            C. hominis &lt;/i&gt; begin with 'AAEL'. The &lt;i&gt;
            C. parvum &lt;/i&gt; Chromosome 6 independently sequenced
            at MRC-LMB  before the whole genome project was completed
            is 'BX526834 '. Wild cards are permitted in this search,
            i.e. use AAEE* to ask for all &lt;i&gt; C. parvum
            &lt;/i&gt; contigs.
        </help>
        <help includeProjects="PlasmoDB">
            Sequence IDs for &#60;i&#62; P. falciparum &#60;/i&#62; chromosomes are 'MAL1' through 'MAL14.'  Sequence IDs for &#60;i&#62; P. yoelii &#60;/i&#62; contigs begin with 'MALPY'.  Sequence IDs for &#60;i&#62; P. vivax &#60;/i&#62; contigs begin with 'ctg_'.  Wild cards are permitted in this search, i.e. use MALPY* to ask for all &#60;i&#62; P.vivax &#60;/i&#62; sequences.
        </help>
    </stringParam>    
 

    <flatVocabParam name="organism" excludeProjects="ToxoDB"
            prompt="species"
            help="Select one or more organisms."
            multiPick="true"
            queryRef="VocabQueries.OrganismWithSequences"/>
        <flatVocabParam name="organism" includeProjects="ToxoDB"
            prompt="Organism"
            help="Select an organism."
            multiPick="false"
            queryRef="VocabQueries.Organism"/>

    </paramSet>
    
  <!--===========================================================================-->
  <!-- Vocab queries  -->
  <!--===========================================================================-->

    <querySet name="GenomicVocabQueries">
        <sqlQuery name="Organism">
            <column name="internal"/>
            <column name="term"/>
             <sql>
                SELECT orgs.term, orgs.internal
                FROM (SELECT tn.name AS term, t.taxon_id AS internal
                      FROM sres.TaxonName tn, sres.taxon t
                      WHERE tn.name_class='scientific name'
                        AND t.taxon_id = tn.taxon_id
                        AND t.rank = 'species'
                        AND t.taxon_id in
                            (SELECT taxon_id
                             FROM sres.taxon
                             CONNECT BY taxon_id = prior parent_id
                             START WITH taxon_id IN
                             (SELECT ens.taxon_id
                              FROM dots.ExternalNaSequence ens))) orgs,
                     (SELECT 'Plasmodium falciparum' AS term, 1 as rank from dual
                      UNION
                      SELECT 'Plasmodium vivax' AS term, 2 as rank from dual
                      UNION
                      SELECT 'Plasmodium yoelii' AS term, 3 as rank from dual) partial_order
                  WHERE orgs.term = partial_order.term(+)
                  ORDER BY partial_order.rank
            </sql>
        </sqlQuery>


    </querySet>

</wdkModel>
