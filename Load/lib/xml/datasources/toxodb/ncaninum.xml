<resources>

  <!-- OldName: N.caninum_chromosomes   OldVersion: 2009-10-06 -->

  <resource resource="Ncaninum_chromosomes_RSRC" version="@@Ncaninum_chromosomes_VER@@"
      plugin="GUS::Supported::Plugin::LoadFastaSequences"
      internalDescrip="Sanger N. caninum chromosomes">

    <manualGet fileOrDir="ToxoDB/ncanimum/genome/chromosome/@@Ncaninum_chromosomes_VER@@/fromProvider"/>

    <unpack>makeCustomFastaAndGffFromGff3 --input_dir @@dataDir@@/@@Ncaninum_chromosomes_VER@@/fromProvider --output_fasta @@dataDir@@/Ncaninum.fasta --output_gff @@dataDir@@/Ncaninum.gff3</unpack>

    <unpack>preprocessGFF3 --input_gff @@dataDir@@/Linfantum.gff3 --output_gff @@dataDir@@/Lcaninum.gff</unpack>

    <pluginArgs>--externalDatabaseName %RESOURCE_NAME% --ncbiTaxId 29176 --externalDatabaseVersion %RESOURCE_VER% --sequenceFile @@dataDir@@/Ncaninum.fasta --SOTermName 'chromosome'  --regexSourceId  '>(\S+)' --tableName "DoTS::ExternalNASequence"</pluginArgs>
    <info
        displayName="N.caninum chromosomes"
        project="ToxoDB"
        organism="Neospora caninum"
        category="Genome"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
Chromosome sequences for <i>N.caninum</i> obtained from the Pathogen Sequencing Unit at the Wellcome Trust Sanger Institute. Please visit <a href="http://www.genedb.org/Homepage/Ncaninum">GeneDB</a> for project details and data release policies.
        ]]>
      </description>
    </info>
  </resource>


  <!-- NOT PORTED -->
  <!-- OldName: updateChromosomeNumberFromMap   OldVersion: 2009-11-23 -->
  <resource resource="updateChromosomeNumberFromMap" version="@@updateChromosomeNumberFromMap_VER@@"
      plugin="ApiCommonData::Load::Plugin::LoadNothing"
      internalDescrip="update Chromosome Number From Mapping file">
    <manualGet fileOrDir="ToxoDB/ncaninum/genome/chromosomeNumberMap/1.0/final/neospChrs.txt"/>
    <unpack>updateChromosomeNumberFromMap.pl --map_file @@dataDir@@/neospChrs.txt --sequence_table ExternalNaSequence </unpack>
    <pluginArgs>--dbRefExternalDatabaseSpec "%RESOURCE_NAME%|%RESOURCE_VER%"</pluginArgs>
    <info
        displayName="update Chromosome and Chromosome order Number From Mapping file"
        project="ToxoDB"
        organism=""
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>


  <!-- OldName: dbEST_NC   OldVersion: 2009-09-25 -->

  <resource resource="Nc_dbEST_RSRC" version="@@_VER@@"
      plugin="GUS::Supported::Plugin::dbEST"
      internalDescrip="ESTs from the mirrored dbEST">
    <manualGet fileOrDir="global/empty"/>
    <unpack>getSubTaxa --ncbiTaxId 29176 --outputFile @@dataDir@@/taxonIdFile</unpack>
    <unpack>createPropFile --file @@dataDir@@/dbestProp --propList "dbestLogin:@@dbestLogin@@,dbestPswd:@@dbestPswd@@"</unpack>
    <pluginArgs>--span 500 --taxonFile @@dataDir@@/taxonIdFile --extDbName %RESOURCE_NAME% --extDbRlsVer %%RESOURCE_VER% --soVer @@SO_VER@@ --dbestLoginFile @@dataDir@@/dbestProp --dbestConnect "dbi:Oracle:musbld" </pluginArgs>
    <info
        displayName="dbEST ESTs"
        project="ToxoDB"
        organism=""
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
ESTs from the mirrored <a href="http://www.ncbi.nlm.nih.gov/dbEST/">dbEST</a> site.
        ]]>
      </description>
    </info>
  </resource>


  <!-- OldName: IEDB_Epitopes   OldVersion: 2009-06-09 -->

  <resource resource="Ncaninum_IEDB_Epitopes_RSRC" version="@@Ncaninum_IEDB_Epitopes_VER@@"
      plugin="GUS::Supported::Plugin::LoadFastaSequences">
    <manualGet fileOrDir="TriTrypDB/common/epitope/IEDB/%RESOURCE_VERSION%/final/IEDBExportNc.txt"/>
    <unpack>mkdir -p @@dataDir@@/IEDB_Epitopes_fixed/fasta</unpack>
    <unpack>extractFromIEDB --inputFile @@dataDir@@/IEDBExportNc.txt --outputFile @@dataDir@@/IEDB_Epitopes_fixed/IEDBExportNc.txt </unpack>
    <unpack>generateEpitopeFastaFile --inputFile @@dataDir@@/IEDB_Epitopes_fixed/IEDBExportNc.txt --outputFile @@dataDir@@/IEDB_Epitopes_fixed/fasta/IEDBExportNc.fsa </unpack>
    <getAndUnpackOutput dir="@@dataDir@@/IEDB_Epitopes_fixed"/>
    <getAndUnpackOutput file="@@dataDir@@/IEDB_Epitopes_fixed/IEDBExportNc.txt"/>
    <pluginArgs>--seqFileDir @@dataDir@@/IEDB_Epitopes_fixed/fasta --externalDatabaseName %RESOURCE_NAME% --externalDatabaseVersion %RESOURCE_VERSION% --soTermName "protein_binding_site" --regexSourceId ">(\d+)|" --tableName "DoTS::MotifAASequence" --logFrequency 100 --regexNcbiTaxId "\|.*\|(.*)" --regexName "\|(.*)\|.*"</pluginArgs>
    <info
        displayName="IEDB Epitopes"
        project="ToxoDB"
        organisms="@@NcaninumOrganismFullName@@"
        category="Proteome"
        publicUrl="http://www.immuneepitope.org"
        contact="IEDB"
        email=""
        institution="IEDB">
      <description>
        <![CDATA[
         IEDB epitopes.
        ]]>
      </description>
    </info>
  </resource>


  <!-- OldName: IEDB_Epitopes_DBxRefs   OldVersion: 2009-06-09 -->

  <resource resource="Ncaninum_IEDB_Epitopes_DBxRefs_RSRC" version="@@Ncaninum_IEDB_Epitopes_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs">
    <manualGet fileOrDir="global/empty"/>
    <unpack>createEpitopeDbRefFile --inputDir @@dataDir@@/../Ncaninum_IEDB_Epitopes_RSRC/IEDB_Epitopes_fixed --outputFile @@dataDir@@/dbRefs.txt</unpack>
    <pluginArgs>--DbRefMappingFile @@dataDir@@/dbRefs.txt --extDbName %RESOURCE_NAME% --extDbReleaseNumber %RESOURCE_VERSION% --columnSpec "primary_identifier, remark" --tableName "AASequenceDbRef"</pluginArgs>
    <info
        displayName="IEDB Epitopes"
        project="ToxoDB"
        organisms="@@NcaninumOrganismFullName@@"
        category="ignore"
        publicUrl="http://www.immuneepitope.org"
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
         IEDB epitopes.
        ]]>
      </description>
    </info>
  </resource>


  <!-- OldName: Neosporacaninum_Gene_Aliases   OldVersion: 01-27-2010 -->

  <resource resource="Ncaninum_Gene_Aliases_RSRC" version="@@Ncaninum_Gene_Aliases_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertNaFeatureNaGene"
      internalDescrip="">
    <manualGet fileOrDir="global/empty"/>
    <unpack>grep 'previous_systematic_id=' @@dataDir@@/../Ncaninum_chromosomes_RSRC/Ncaninum.gff3 >  @@dataDir@@/previousIdLines</unpack>
    <unpack>perl -e '%hsh;while(<>){chomp; @arr=split(/\t/,$_); $arr[8]=~ /ID=(\w+)\:.+previous_systematic_id\=(\w+)/; $hsh{$1}=$2;} foreach $k(keys %hsh){print "$k\t$hsh{$k}\n";}' @@dataDir@@/previousIdLines > @@dataDir@@/new2oldIds_Ncaninum.txt</unpack>
    <pluginArgs>--MappingFile @@dataDir@@/new2oldIds_Ncaninum.txt</pluginArgs>
    <info
        displayName="Neosporacaninum genes with the previous source_ids"
        project="ToxoDB"
        organism=""
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>


  <!-- OldName: ApiLoc_EupathDB_Dbrefs   OldVersion: 2010-03-29 -->

  <resource resource="nc_apiLoc_DbxRefs" version="@@nc_apiLoc_DbxRefs_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs"
      internalDescrip="dbxrefs from ApiLoc.org">
    <manualGet fileOrDir="ToxoDB/ncaninum/dbxref/ApiLoc_dbrefs/%RESOURCE_VERSION%/fromProvider/Ncaninum.html"/>
    <unpack>makeDbxRefsFromApiLocHtml @@dataDir@@/Ncaninum.html "Neospora caninum" > @@dataDir@@/dbxrefs.txt</unpack>
    <pluginArgs>--DbRefMappingFile @@dataDir@@/dbxrefs.txt --extDbName %RESOURCE_NAME% --extDbReleaseNumber %RESOURCE_VER% --columnSpec "remark" --tableName "DbRefNAFeature"</pluginArgs>
    <info
        displayName="ApiLoc cross references"
        project="ToxoDB"
        organism="all"
        category="ignore"
        publicUrl=""
        contact="Stuart Ralph"
        email="saralph@unimelb.edu.au"
        institution="University of Melbourne ">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>


  <!-- NOT PORTED -->
  <!-- OldName: Entrez_Gene_dbxref   OldVersion: 12-01-2009 -->
  <resource resource="Entrez_Gene_dbxref" version="@@_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs"
      internalDescrip="dbxref from entrez gene ids to eupathdb gene identifiers.">
    <manualGet fileOrDir="/files/cbil/data/cbil/Common/Entrez_Gene/gene_info_tgondii"/>
    <pluginArgs>--DbRefMappingFile @downloadDir@/Entrez_Gene_dbxref/gene_info_tgondii --extDbName %EXT_DB_NAME% --extDbReleaseNumber %EXT_DB_RLS_VER% --columnSpec "primary_identifier,secondary_identifier,remark" --tableName "DbRefNAFeature"</pluginArgs>
    <info
        displayName="dbxref from entrez gene ids to eupathdb gene identifiers"
        project="ToxoDB"
        organism=""
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>


  <!-- NOT PORTED -->
  <!-- OldName: Uniprot_Gene_dbxref   OldVersion: 11-24-2009 -->
  <resource resource="Uniprot_Gene_dbxref" version="@@_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs"
      internalDescrip="dbxref from Uniprot gene ACs to eupathdb gene identifiers.">
    <manualGet fileOrDir="/files/cbil/data/cbil/Common/Uniprot/Uniprot_Gene_tgondii"/>
    <pluginArgs>--DbRefMappingFile @downloadDir@/Uniprot_Gene_dbxref/Uniprot_Gene_tgondii --extDbName %EXT_DB_NAME% --extDbReleaseNumber %EXT_DB_RLS_VER% --columnSpec "primary_identifier,secondary_identifier,remark" --tableName "DbRefNAFeature"</pluginArgs>
    <info
        displayName="dbxref from Uniprot gene ACs to eupathdb gene identifiers"
        project="ToxoDB"
        organism=""
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>

</resources>
