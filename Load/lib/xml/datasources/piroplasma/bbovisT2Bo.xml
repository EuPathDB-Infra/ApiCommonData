<resources>

<!--ISFResource-->

  <resource resource="BbovisT2Bo_chromosomes_RSRC" version="@@BbovisT2Bo_chromosomes_VER@@"
      plugin="GUS::Supported::Plugin::LoadFastaSequences">
    <manualGet fileOrDir="PiroplasmaDB/bbovisT2Bo/genome/chromosome/%RESOURCE_VERSION%/gff"/>
    <pluginArgs>--externalDatabaseName %RESOURCE_NAME% --ncbiTaxId 484906 --externalDatabaseVersion %RESOURCE_VERSION% --sequenceFile @@dataDir@@/ --SOTermName 'chromosome'  --regexSourceId  '>(\S+)\|' --tableName "DoTS::ExternalNASequence" --regexChromosome '\|(\d+)'</pluginArgs>
    <info
        displayName="T. parvaMuguga chromosomes sequence and annotation"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="Genome"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>

  <resource resource="BbovisT2Bo_annotations_RSRC" version="@@BbovisT2Bo_chromosomes_VER@@" parentResource="BbovisT2Bo_chromosomes_RSRC"
      plugin="GUS::Supported::Plugin::InsertSequenceFeatures">
    <manualGet fileOrDir="PiroplasmaDB/bbovisT2Bo/genome/chromosome/%RESOURCE_VERSION%/gff"/>
    <pluginArgs>--extDbName %PARENT_RESOURCE_NAME% --extDbRlsVer %PARENT_RESOURCE_VERSION% --mapFile @@gusHome@@/lib/xml/isf/geneDBGFF2Gus.xml --inputFileOrDir @@dataDir@@/ --inputFileExtension "gff"  --fileFormat gff3 --soCvsVersion @@SO_VER@@ --defaultOrganism "Theileria parva strain Muguga"  --seqSoTerm "chromosome" --validationLog @@dataDir@@/validation.log --bioperlTreeOutput @@dataDir@@/bioperlTree.out --seqIdColumn source_id --naSequenceSubclass ExternalNASequence</pluginArgs>
    <info
        displayName="T. parvaMuguga sequence and annotation"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[

        ]]>
      </description>
    </info>
  </resource>

<!--ESTResource-->
  <resource resource="BbovisT2Bo_dbEST_RSRC" version="@@BbovisT2Bo_dbEST_VER@@"
      plugin="GUS::Supported::Plugin::dbEST">
    <manualGet fileOrDir="global/empty"/>
    <unpack>getSubTaxa --ncbiTaxId 5865 --outputFile @@dataDir@@/taxonIdFile</unpack>
    <unpack>createPropFile --file @@dataDir@@/dbest.prop --propList "dbestLogin:@@dbestLogin@@,dbestPswd:@@dbestPswd@@"</unpack>
    <pluginArgs>--span 500 --taxonFile @@dataDir@@/taxonIdFile --extDbName %RESOURCE_NAME% --extDbRlsVer %RESOURCE_VERSION% --soVer @@SO_VER@@ --dbestLoginFile @@dataDir@@/dbest.prop --dbestConnect @@dbestConnect@@ </pluginArgs>
    <info
        displayName="Piroplasma dbEST ESTs"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="Transcriptome"
        publicUrl="http://www.ncbi.nlm.nih.gov/dbEST/"
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
         Piroplasma ESTs from dbEST.
        ]]>
      </description>
    </info>
  </resource>


<!--DbxRefsResource-->
  <resource resource="BbovisT2Bo_Entrez_Gene_dbxref_RSRC" version="2011-01-31"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs">
    <manualGet fileOrDir="PiroplasmaDB/common/dbxref/Gene2Entrez/%RESOURCE_VERSION%/gene2entrez.tab"/>
    <pluginArgs>--DbRefMappingFile @@dataDir@@/gene2entrez.tab --extDbName %RESOURCE_NAME% --extDbReleaseNumber %RESOURCE_VERSION% --columnSpec "primary_identifier,secondary_identifier,remark" --tableName "DbRefNAFeature"  --geneExternalDatabaseSpec 'BbovisT2Bo_chromosomes_RSRC|@@BbovisT2Bo_chromosomes_VER@@'  --idType 'alternate id'</pluginArgs>
    <info
        displayName="dbxref from entrez gene ids to eupathdb gene identifiers"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[         
        ]]>
      </description>
    </info>
  </resource>

  <resource resource="BbovisT2Bo_Uniprot_Gene_dbxref_RSRC" version="@@BbovisT2Bo_Uniprot_Gene_dbxref_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs">
    <manualGet fileOrDir="PiroplasmaDB/common/dbxref/Gene2Uniprot/%RESOURCE_VERSION%/gene2uniprot.tab"/>
    <pluginArgs>--DbRefMappingFile @@dataDir@@/gene2uniprot.tab --extDbName %RESOURCE_NAME% --extDbReleaseNumber %RESOURCE_VERSION% --columnSpec "primary_identifier,secondary_identifier,remark" --tableName "DbRefNAFeature"  --geneExternalDatabaseSpec 'BbovisT2Bo_chromosomes_RSRC|@@BbovisT2Bo_chromosomes_VER@@' --idType 'alternate id'</pluginArgs>
    <info
        displayName="dbxref from Uniprot gene ACs to eupathdb gene identifiers"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="ignore"
        publicUrl=""
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
         
        ]]>
      </description>
    </info>
  </resource>

<!--Proteome-->

  <resource resource="BbovisT2Bo_IEDB_Epitopes_RSRC" version="@@BbovisT2Bo_IEDB_Epitopes_VER@@"
      plugin="GUS::Supported::Plugin::LoadFastaSequences">
    <manualGet fileOrDir="PiroplasmaDB/common/epitope/IEDB/%RESOURCE_VERSION%/final/"/>
    <unpack>mkdir -p @@dataDir@@/IEDB_Epitopes_fixed/fasta</unpack>
    <unpack>extractFromIEDB --inputFile @@dataDir@@/ --outputFile @@dataDir@@/IEDB_Epitopes_fixed/ </unpack>
    <unpack>generateEpitopeFastaFile --inputFile @@dataDir@@/IEDB_Epitopes_fixed/ --outputFile @@dataDir@@/IEDB_Epitopes_fixed/fasta/ </unpack>
    <getAndUnpackOutput dir="@@dataDir@@/IEDB_Epitopes_fixed"/>
    <getAndUnpackOutput file="@@dataDir@@/IEDB_Epitopes_fixed/"/>
    <pluginArgs>--seqFileDir @@dataDir@@/IEDB_Epitopes_fixed/fasta --externalDatabaseName %RESOURCE_NAME% --externalDatabaseVersion %RESOURCE_VERSION% --soTermName "protein_binding_site" --regexSourceId ">(\d+)|" --tableName "DoTS::MotifAASequence" --logFrequency 100 --regexNcbiTaxId "\|.*\|(.*)" --regexName "\|(.*)\|.*"</pluginArgs>
    <info
        displayName="IEDB Epitopes"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoOrganismFullName@@"
        category="Proteome"
        publicUrl="http://www.immuneepitope.org"
        contact="IEDB"
        email=""
        institution="IEDB">
      <description>
        <![CDATA[
         IEDB epitopes.
        ]]>
      </description>
    </info>
  </resource>

  <resource resource="BbovisT2Bo_IEDB_Epitopes_DBxRefs_RSRC" version="@@BbovisT2Bo_IEDB_Epitopes_VER@@"
      plugin="ApiCommonData::Load::Plugin::InsertDBxRefs">
    <manualGet fileOrDir="global/empty"/>
    <unpack>createEpitopeDbRefFile --inputDir @@dataDir@@/../BbovisT2Bo_IEDB_Epitopes_RSRC/IEDB_Epitopes_fixed --outputFile @@dataDir@@/dbRefs.txt</unpack>
    <pluginArgs>--DbRefMappingFile @@dataDir@@/dbRefs.txt --extDbName %RESOURCE_NAME% --extDbReleaseNumber %RESOURCE_VERSION% --columnSpec "primary_identifier, remark" --tableName "AASequenceDbRef"</pluginArgs>
    <info
        displayName="IEDB Epitopes"
        project="PiroplasmaDB"
        organisms="@@BbovisT2BoyOrganismFullName@@"
        category="ignore"
        publicUrl="http://www.immuneepitope.org"
        contact=""
        email=""
        institution="">
      <description>
        <![CDATA[
         IEDB epitopes.
        ]]>
      </description>
    </info>
  </resource>

</resources>
