<workflowGraph name="organismAnalysis">
  <param name="organismName"/>
  <param name="organismTwoLetterAbbrev"/>
  <param name="genomeExtDb"/>
  <param name="genomeExtDbRls"/>
  <param name="interproVersion"/>
  <param name="iedbVersion"/>
  <param name="soVersion"/>
  <param name="tigrVersion"/>
  <param name="ncbiTaxonVersion"/>
  <param name="ncbiTaxonId"/>

  <!-- handles on external datasets -->
  <constant name="genomeExtDbRlsSpec">$$genomeExtDb$$:$$genomeExtDbRls$$</constant>
  <constant name="soExtDbRlsSpec">SequenceOntology:$$soVersion$$</constant>
  <constant name="tigrExtDbRlsSpec">tigr:$$tigrVersion$$</constant>
  <constant name="taxonomyExtDbRlsSpec">taxonomy:$$taxonomyVersion$$</constant>
  <constant name="nrdbFile">seqfiles/nr.fsa</constant>
  <constant name="nrdbExtDbRlsSpec">NRDB:$$nrdbVersion$$</constant>
  <constant name="nrdbShortDeflineFile">seqfiles/nrShortDefline.fsa</constant>
  <constant name="genomicSeqsFile">seqfiles/GenomicSeqs.fsa</constant>
  <constant name="organismDataDir">data/$$organismName$$</constant>
  <constant name="organismTaskLogsDir">taskLogs/$$organismName$$</constant>
  <constant name="proteinsFile">$$organismDataDir$$/seqfiles/AnnotatedProteins.fsa</constant>

    <step name="makeDataDir" class="ApiCommonData::Load::WorkflowSteps::MakeDir">
      <paramValue name="dataDir">$$organismName$$</paramValue>
    </step>

    <subgraph name="genomeAnalysis" xmlFile="genomeAnalysis.xml">
      <paramValue name="organismName">$organismName</paramValue>
      <paramValue name="organismDataDir">$$organismDataDir$$</paramValue>
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="organismTwoLetterAbbrev">$$organismTwoLetterAbbrev$$</paramValue>
      <paramValue name="iedbExtDbRlsSpec">iedb:$$iedbVersion$$</paramValue>
      <depends step="makeDataDir"/>
    </subgraph>

    <subgraph name="proteomeAnalysis" xmlFile="proteomeAnalysis.xml">
      <paramValue name="proteinsFile">$proteinsFile</paramValue>
      <paramValue name="organismName">$organismName</paramValue>
      <paramValue name="genomeDataDir">$$organismDataDir$$</paramValue>
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="organismTwoLetterAbbrev">$$organismTwoLetterAbbrev$$</paramValue>
      <paramValue name="iedbExtDbRlsSpec">iedb:$$iedbVersion$$</paramValue>
      <depends step="makeDataDir"/>
    </subgraph>


</workflow>
