<workflowGraph name="proteomeAnalysis">
  <param name="organismTwoLetterAbbrev"/>
  <param name="parentDataDir"/>
  <param name="genomeExtDbRlsSpec"/>
  <param name="interproVersion"/>
  <param name="iedbVersion"/>
  <param name="nrdbExtDbRlsSpec"/>
  <param name="ncbiTaxonId"/>
  <param name="nrdbFile"/>
  <param name="nrdbShortDeflineFile"/>
  <param name="nrdbExtDbRlsSpec"/>
  <param name="pdbFile"/>
  <param name="calculateTranslatedProteins"/>
  <param name="soVersion"/>
  <param name="pdbExtDbRlsSpec"/>
  <param name="goVersion"/>
  <param name="organismName"/>
  <param name="runExportPred"/>

  <constant name="dataDir">$$parentDataDir$$/proteome</constant>
  <constant name="proteinsFile">$$dataDir$$/AnnotatedProteins.fsa</constant>

    <step name="calcTranslatedProteins"
          stepClass="ApiCommonData::Load::WorkflowSteps::CalculateTranslatedProteinSequence" includeIf="$$calculateTranslatedProteins$$" stepLoadTypes="plugin">
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="soVersion">$$soVersion$$</paramValue>
    </step>

    <step name="makeDataDir" stepClass="ApiCommonData::Load::WorkflowSteps::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>

    <step name="extractProteins"
          stepClass="ApiCommonData::Load::WorkflowSteps::ExtractAnnotatedProteinsBySpecies">
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
      <paramValue name="outputFile">$$proteinsFile$$</paramValue>
      <depends name="calcTranslatedProteins"/>
      <depends name="makeDataDir"/>
    </step>

    <step name="mirrorProteinsToCluster" stepClass="ApiCommonData::Load::WorkflowSteps::MirrorToComputeCluster" stepLoadTypes="cluster">
      <paramValue name="fileOrDirToMirror">$$dataDir$$</paramValue>
      <depends name="extractProteins"/>
    </step>

    <step name="runExportPred"
          stepClass="ApiCommonData::Load::WorkflowSteps::RunExportPred" includeIf="$$runExportPred$$">
      <paramValue name="proteinsFile">$$proteinsFile$$</paramValue>
      <paramValue name="outputFile">$$dataDir$$/exportPred.out</paramValue>
      <depends name="extractProteins"/>
    </step>

    <step name="insertExportPred"
          stepClass="ApiCommonData::Load::WorkflowSteps::InsertExportPred" stepLoadTypes="plugin" includeIf="$$runExportPred$$">
      <paramValue name="inputFile">$$dataDir$$/exportPred.out</paramValue>
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <depends name="runExportPred"/>
    </step>

</workflowGraph>
