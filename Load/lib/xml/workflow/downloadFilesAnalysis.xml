<workflowGraph name="downloadFilesAnalysis">
  <param name="projectName"/>
  <param name="projectVersion"/>
  <param name="parentDataDir"/>
  <param name="organismName"/>
  <param name="organismTwoLetterAbbrev"/>
  <param name="genomeExtDbRlsSpec"/>
  <param name="genomeVirtualSeqsExtDbRlsSpec"/>
  <param name="genomeSource"/>
  <param name="interproVersion"/>
  <param name="dbESTVersion"/>
  <param name="ncbiTaxonId"/>
  <param name="parentNcbiTaxonId"/>


  <constant name="downloadSiteDataDir">downloadSite/$$projectName$$/$$projectVersion$$/$$organismName$$</constant>
  <constant name="webServicesDataDir">webServices/$$projectName$$/$$projectVersion$$</constant>

  <step name="makeDownloadSiteDataDir" stepClass="ApiCommonData::Load::WorkflowSteps::MakeApiSiteFilesDir">
    <paramValue name="apiSiteFilesDir">$$downloadSiteDataDir$$</paramValue>
  </step>

    <step name="runTuningManager"
          stepClass="ApiCommonData::Load::WorkflowSteps::RunTuningManager">
      <paramValue name="configFileRelativeToGusHomeDir">/lib/xml/tuningManager.xml</paramValue>
    </step>

  <subgraph name="makeAndFormatDownloadFiles" xmlFile="makeAndFormatDownloadFiles.xml">
    <paramValue name="downloadSiteDataDir">$$downloadSiteDataDir$$</paramValue>
    <paramValue name="organismName">$$organismName$$</paramValue>
    <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
    <paramValue name="parentNcbiTaxonId">$$parentNcbiTaxonId$$</paramValue>
    <paramValue name="interproVersion">$$interproVersion$$</paramValue>
    <paramValue name="genomeSource">$$genomeSource$$</paramValue>
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="dbESTExtDbRlsSpec">dbEST:$$dbESTVersion$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
    <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
    <paramValue name="genomeVirtualSeqsExtDbRlsSpec">$$genomeVirtualSeqsExtDbRlsSpec$$</paramValue>
    <paramValue name="minOrfLength">50</paramValue>
    <depends name="runTuningManager"/>
    <depends name="makeDownloadSiteDataDir"/>
  </subgraph>

</workflowGraph>
