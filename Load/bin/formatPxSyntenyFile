#!/usr/bin/perl

# Pxchr  Pxstart Pxstop Pxstrand Pfchr Pfstart Pfstop Pf strand
#
# and reformats it as
#
# Pfchr Pxchr Pfstart Pflength Pxstart Pxlength Pfstrand

use strict;

use lib "$ENV{GUS_HOME}/lib/perl";
use Getopt::Long qw(GetOptions);

my $inputFile;
my $outputFile;

&GetOptions("inputFile=s" => \$inputFile,
           "outputFile=s"    => \$outputFile,
         );

unless ($inputFile){ 
  print STDERR "Please provide input file\n\nUSAGE: formatPxSyntenyFile --inputFile <FILEPATH> --outputFile <FILEPATH> [--verbose]\n";
  exit;
}

$outputFile = $inputFile . "-synteny" unless($outputFile);


open(FILE, $inputFile) or die "Could not open file $inputFile for reading: $!";

open(OUT, "> $outputFile") or die "Could not open file $outputFile for writing: $!";

while(<FILE>) {
  chomp;

  my ($aContig, $aStart, $aEnd, $aStrand, $bContig, $bStart, $bEnd, $bStrand) = split(/\t/, $_);


  if($aContig =~ /assembled/ || $bContig =~ /assembled/) {
    die "Cannot handle assembled contigs";
  }

  my $aLength = $aEnd - $aStart + 1;
  my $bLength = $bEnd - $bStart + 1;

  print OUT "$bContig\t$aContig\t$bStart\t$bLength\t$aStart\t$aLength\t$bStrand\n";  

}

close FILE;
close OUT;

1;













