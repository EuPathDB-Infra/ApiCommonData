#!/usr/bin/perl
use strict;

use lib "$ENV{GUS_HOME}/lib/perl";

use Getopt::Long;

my ($inFile,$outFile,$verbose);
&GetOptions("inFile=s" => \$inFile,
            "outFile=s" => \$outFile,
	    "verbose!" => \$verbose);


die "usage:processIdxFile --inFile --outFile
     generates a file of ids and taxon names from an input source.idx file from PDB\n" if (! -e $inFile && ! $outFile);


open (INFILE, $inFile) || die "Can't open $inFile\n";

open (OUTFILE, ">$outFile") || die "Can't open $outFile\n";

while(<INFILE>){
  chomp;
  my $line = $_;
  next if ($line !~ /^\d+/);
  my @ln = split (/\t/,$line);
  my $id = $ln[0];
  my @names = split(/\;\s/,$ln[1]);
  print OUTFILE ("$id\n") if (@names < 1);
  foreach my $name (@names) {
    $name =~ s/^\s//;
    print OUTFILE ("$id\t$name\n");
  }
}

